---
layout: post
title: ìš°í…Œì½” - ì²´ìŠ¤ ë¯¸ì…˜ íšŒê³ 
subtitle: ë¶€ì œëª© ì˜ˆì‹œ
tags: woowacourse chess pair-programming tdd
description: >
  ì²´ìŠ¤ ë¯¸ì…˜ì„ ì§„í–‰í•˜ë©´ì„œ ìˆì—ˆë˜ ê³¼ì •ì„ íšŒê³ í•´ë³´ì
sitemap: true
hide_last_modified: true
categories:
  - woowacourse
---

![](/assets/img/blog/woowacourse/che_1.jpg)

ì–¼ë§ˆ ì „, Level 1 ë§ˆì§€ë§‰ ë¯¸ì…˜ì¸ ì²´ìŠ¤ ë¯¸ì…˜ì„ ë§ˆë¬´ë¦¬í•˜ì˜€ë‹¤. í•˜ì§€ë§Œ ë­”ê°€ ì‹œì›í•˜ì§€ ì•Šê³  ì˜¤íˆë ¤ ê³ ë¯¼ë§Œ ë§ì•„ì ¸ì„œ ê¸€ì„ ì‘ì„±í•˜ëŠ” ì§€ê¸ˆë„ ì°ì°í•¨ì´ ë‚¨ì•„ìˆë‹¤. ì§€ê¸ˆê¹Œì§€ ë°°ìš´ ê²ƒë“¤ì— ëŒ€í•´ ì•„ì§ ì œëŒ€ë¡œ ì •ë¦¬ë„ ë˜ì§€ ì•Šì•˜ê³  ë˜í•œ, ì—¬ëŸ¬ ê°€ì§€ë¥¼ ë§›ë³´ë‹¤ ë³´ë‹ˆ ë” ê¹Šê²Œ ê³µë¶€í•´ì•¼ ë  í•„ìš”ì„±ì„ ëŠë¼ê²Œ ë˜ì–´ ê±±ì •ì´ ë§ì•„ì§„ ê²ƒì´ë‹¤. ê·¸ë˜ì„œ Level 2ì—ì„œëŠ” Level 2 ë¯¸ì…˜ê³¼ ë™ì‹œì— Level 1 ë•Œ ëœ í•œ ê²ƒì„ ë³´ì¶©í•˜ë ¤ í•œë‹¤.

### ëª©ì°¨
- mermaid ì‚¬ìš©í•´ì„œ ë„ë©”ì¸ ë‹¤ì´ì–´ê·¸ë¨ ë‚˜íƒ€ë‚´ê¸°
- ëª…ë ¹ì–´ ì¢€ ë” ê¹”ë”í•˜ê²Œ ì²˜ë¦¬í•˜ê¸°
- Null ê°ì²´ íŒ¨í„´
- Streamì´ ê¼­ í•„ìš”í•œ ê²ƒì¼ê¹Œ?
- ìƒì†ì˜ ë‹¨ì ì„ ì§ì ‘ ê²½í—˜
- ì˜¤ë¸Œì íŠ¸ ìŠ¤í„°ë””

--- 

## mermaid ì‚¬ìš©í•´ì„œ ë„ë©”ì¸ ë‹¤ì´ì–´ê·¸ë¨ ë‚˜íƒ€ë‚´ê¸°

![](/assets/img/blog/woowacourse/che_2.PNG)

ì €ë²ˆ ë¸”ë™ì­ íšŒê³ í•  ë•Œ Over READMEë¥¼ ì‘ì„±í•˜ë‹¤ ë³´ë‹ˆ ì‹œê°„ì´ ë„ˆë¬´ ì§€ì²´ë˜ì–´ ì´ë²ˆì—ëŠ” ê°„ë‹¨íˆ mermaidë¼ëŠ” íˆ´ë¡œ ë„ë©”ì¸ ë‹¤ì´ì–´ê·¸ë¨ì„ ê·¸ë¦¬ê³  ê·¸ì— ë§ëŠ” ë„ë©”ì¸ ê¸°ëŠ¥ë“¤ì„ ì‘ì„±í•˜ì ë§ˆìŒë¨¹ì—ˆì—ˆëŠ”ë° ê³„íší–ˆë˜ ëŒ€ë¡œ ì˜ ëë˜ ê²ƒ ê°™ì•„ ë¿Œë“¯í•˜ë‹¤. í•˜ì§€ë§Œ ì„¤ê³„í•  ë•Œ ì—­ì‹œ ëˆ„êµ¬í•œí…Œ ì–´ë–¤ ì±…ì„ì„ ë¶€ì—¬í• ì§€ëŠ” ì•„ì§ë„ ì–´ë ¤ìš´ ìˆ™ì œì¸ ê²ƒ ê°™ë‹¤.

[ìš°ì•„í•œ ê°ì²´ì§€í–¥ ì„¸ë¯¸ë‚˜]ì—ì„œ ì¡°ì˜í˜¸ ë‹˜ê»˜ì„œ ì´ëŸ° ë§ì”€ì„ í•˜ì…¨ë‹¤. "í•­ìƒ ì½”ë“œë¥¼ ì§œë©´ ì €ëŠ” ì˜ì¡´ì„±(dependency)ì„ ì¢…ì´ì— ê·¸ë ¤ë³¸ë‹¤. ì˜ì¡´ì„±ì„ ê·¸ë ¸ì„ ë•Œ ë­”ê°€ ì´ìƒí•œ ê²Œ ìˆìœ¼ë©´ ì½”ë“œëŠ” ì •ë§ ì´ìƒí•œ ë¶€ë¶„ë“¤ì´ ë§ë‹¤. ì½”ë“œëŠ” ìµœì¢… ê²°ê³¼ë¬¼ì€ ì˜ˆì  ìˆ˜ ìˆì§€ë§Œ ê³¼ì •ì€ ì§€ì €ë¶„í•˜ë‹¤. ì´ˆë°˜ì—ëŠ” ì €ë„ ì½”ë“œë¥¼ ì ˆì°¨ì ìœ¼ë¡œ ì§¤ ë•Œê°€ ë§ë‹¤. ì™œëƒë©´ ìƒê°ì´ ë‚˜ì§€ ì•ŠëŠ”ë‹¤. ì´ê±¸ ì–´ë–»ê²Œ ìª¼ê°¤ì§€ë„ ëª¨ë¥´ê² ê³  ì–´ë””ì— ë„£ì–´ì•¼ ë ì§€ë„ ëª¨ë¥´ê² ìŒ. ê·¸ë˜ì„œ ì¼ë‹¨ ì½”ë“œë¥¼ ì§œê³  ì˜ì¡´ì„±ì„ ë³´ë©´ì„œ ê°œì„ í•˜ë‹¤ ë³´ë©´ ìê¸°ê°€ ì›í•˜ëŠ” êµ¬ì¡°ë¡œ ê°€ëŠ” ê²½ìš°ê°€ ë§ë‹¤."

ê²½í—˜ì´ ë§ìœ¼ì‹  ì¡°ì˜í˜¸ ë‹˜ë„ í•œ ë²ˆì— ì„¤ê³„í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ì ì°¨ ê°œì„ í•˜ëŠ”ë°, ë³‘ì•„ë¦¬ì¸ ë‚´ê°€ ì–´ë–»ê²Œ í•œ ë²ˆì— ì„¤ê³„ë¥¼ ì™„ì„±ì‹œí‚¤ë ¤ í–ˆë‚˜ ìƒê°ì´ ë“ ë‹¤. ì•ìœ¼ë¡œëŠ” ì˜ì¡´ì„±ì„ ê·¸ë ¤ë³´ê³  ì ì°¨ ê°œì„ í•´ ë´ì•¼ê² ë‹¤.

[ìš°ì•„í•œ ê°ì²´ì§€í–¥ ì„¸ë¯¸ë‚˜]:https://www.youtube.com/watch?v=dJ5C4qRqAgA

## ëª…ë ¹ì–´ ì¢€ ë” ê¹”ë”í•˜ê²Œ ì²˜ë¦¬í•˜ê¸°
ì´ë²ˆ ì²´ìŠ¤ ë¯¸ì…˜ì—ì„œëŠ” start, end, status, move ë“± ë‹¤ì–‘í•œ ëª…ë ¹ì–´ì— ë”°ë¥¸ í–‰ë™ì´ ì‹¤í–‰ëœë‹¤. ê·¸ì— ë”°ë¼ ì–´ë– í•œ ë©”ì»¤ë‹ˆì¦˜ì„ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë©´ Controllerì— if ë¶„ê¸°ë¬¸ì´ ê·¸ë§Œí¼ ë§ì´ ë“¤ì–´ê°€ê²Œ ë˜ì–´ ê°€ë…ì„±ì´ ì¢‹ì§€ ì•Šì„ ê±°ë¼ ìƒê°ë˜ì–´ì„œ ì»¤ë§¨ë“œ íŒ¨í„´ê³¼ ë¹„ìŠ·í•œ êµ¬ì¡°ë¥¼ ë„ì…í•˜ê²Œ ë˜ì—ˆë‹¤.

> ì»¤ë§¨ë“œ íŒ¨í„´: ì»¤ë§¨ë“œ íŒ¨í„´ì´ë€ ìš”ì²­ì„ ê°ì²´ì˜ í˜•íƒœë¡œ ìº¡ìŠí™”í•˜ì—¬ ì‚¬ìš©ìê°€ ë³´ë‚¸ ìš”ì²­ì„ ë‚˜ì¤‘ì— ì´ìš©í•  ìˆ˜ ìˆë„ë¡ ë§¤ì„œë“œ ì´ë¦„, ë§¤ê°œë³€ìˆ˜ ë“± ìš”ì²­ì— í•„ìš”í•œ ì •ë³´ë¥¼ ì €ì¥ ë˜ëŠ” ë¡œê¹…, ì·¨ì†Œí•  ìˆ˜ ìˆê²Œ í•˜ëŠ” íŒ¨í„´

ì²´ìŠ¤ ë¯¸ì…˜ 1, 2ë‹¨ê³„ì—ì„œëŠ” ë‹¤ìŒê³¼ ê°™ì´ BiConsumer í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ë¥¼ Command ê°ì²´ ì•ˆì— ë„£ì–´ë†“ê³  controllerì—ì„œ command.execute()ë§Œ ì‹¤í–‰í•˜ë©´ ê° ëª…ë ¹ì–´ê°€ ì‹¤í–‰ë˜ë„ë¡ ë§Œë“¤ì–´ë†¨ë‹¤.

```java
package chess.controller;

import chess.domain.game.ChessGame;
import chess.domain.position.File;
import chess.domain.position.Position;
import chess.domain.position.Rank;
import java.util.Arrays;
import java.util.function.BiConsumer;

public enum Command {

    START("start", (chessGame, ignored) -> chessGame.start()),
    END("end", (chessGame, ignored) -> chessGame.end()),
    MOVE("move", moveOrNot());

    public static final int SOURCE_INDEX = 1;
    public static final int TARGET_INDEX = 2;
    public static final int FILE_INDEX = 0;
    public static final int RANK_INDEX = 1;

    private final String name;
    private final BiConsumer<ChessGame, String[]> consumer;

    Command(final String name, final BiConsumer<ChessGame, String[]> consumer) {
        this.name = name;
        this.consumer = consumer;
    }

    private static BiConsumer<ChessGame, String[]> moveOrNot() {
        return (chessGame, splitCommand) -> {
            final String[] source = splitPosition(splitCommand, SOURCE_INDEX);
            final String[] target = splitPosition(splitCommand, TARGET_INDEX);

            final Position sourcePosition = Position.of(File.getFile(source[FILE_INDEX]),
                    Rank.getRank(Integer.parseInt(source[RANK_INDEX])));
            final Position targetPosition = Position.of(File.getFile(target[FILE_INDEX]),
                    Rank.getRank(Integer.parseInt(target[RANK_INDEX])));

            chessGame.moveOrNot(sourcePosition, targetPosition);
        };
    }

    private static String[] splitPosition(final String[] splitCommand, final int index) {
        return splitCommand[index].split("");
    }

    public static Command findByString(final String name) {
        return Arrays.stream(values())
                .filter(command -> command.name.equals(name))
                .findFirst()
                .orElseThrow(() -> new IllegalArgumentException("ì˜ëª»ëœ ì»¤ë§¨ë“œì…ë‹ˆë‹¤."));
    }

    public void execute(final ChessGame chessGame, final String[] splitCommand) {
        this.consumer.accept(chessGame, splitCommand);
    }
}
```

í•˜ì§€ë§Œ 3, 4ë‹¨ê³„ì—ì„œ dbê°€ ë„ì…ë˜ê³  ë‚œ í›„ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ë©´ ì˜ì†ì„±ê¹Œì§€ ê±´ë“œë¦´ ì¼ì´ ìƒê²¼ë‹¤. ì˜ˆë¥¼ ë“¤ì–´, moveOrNot() ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ê³  ë‚˜ë©´ dbì˜ ì²´ìŠ¤ ìœ„ì¹˜ë¥¼ updateì‹œì¼œì¤˜ì•¼ í•œë‹¤. ê·¸ë˜ì„œ BiConsumer ë¶€ë¶„ì„ Controllerë¡œ ë¹¼ê¸°ë¡œ í–ˆê³  EnumMapì„ ì‚¬ìš©í•˜ì—¬ ê¸°ì¡´ì˜ Commandë¥¼ ê° Biconsumerì— ë§¤í•‘ ì‹œì¼œì¤¬ë‹¤.

```java
package chess.controller;

import chess.domain.game.ChessGame;
import chess.domain.piece.Side;
import chess.domain.position.File;
import chess.domain.position.Position;
import chess.domain.position.Rank;
import chess.service.ChessGameService;
import chess.view.InputView;
import chess.view.OutputView;

import java.sql.SQLException;
import java.util.EnumMap;
import java.util.Map;
import java.util.function.BiConsumer;

public class ChessController {

    public static final int COMMAND_INDEX = 0;
    public static final int SOURCE_INDEX = 1;
    public static final int TARGET_INDEX = 2;
    public static final int FILE_INDEX = 0;
    public static final int RANK_INDEX = 1;

    private final Map<Command, BiConsumer<ChessGame, String[]>> commands = new EnumMap<>(Command.class);
    private final ChessGameService chessGameService;

    public ChessController(ChessGameService chessGameService) {
        putCommands();
        this.chessGameService = chessGameService;
    }

    private void putCommands() {
        commands.put(Command.START, (chessGame, ignored) -> start(chessGame));
        commands.put(Command.END, (chessGame, ignored) -> end(chessGame));
        commands.put(Command.STATUS, (chessGame, ignored) -> status(chessGame));
        commands.put(Command.MOVE, this::moveOrNot);
    }

    private void start(ChessGame chessGame) {
        chessGame.start();
    }

    private void end(ChessGame chessGame) {
        chessGame.end();
    }

    private void status(ChessGame chessGame) {
        final Double whiteScore = chessGame.calculateScore(Side.WHITE);
        final Double blackScore = chessGame.calculateScore(Side.BLACK);
        OutputView.printScore(whiteScore, blackScore);
        OutputView.printWinner(Side.calculateWinner(whiteScore, blackScore));
    }

    private void moveOrNot(ChessGame chessGame, String[] splitCommand) {
        final String[] source = splitPosition(splitCommand, SOURCE_INDEX);
        final String[] target = splitPosition(splitCommand, TARGET_INDEX);

        final Position sourcePosition = Position.of(File.getFile(source[FILE_INDEX]),
                Rank.getRank(parseRank(source)));
        final Position targetPosition = Position.of(File.getFile(target[FILE_INDEX]),
                Rank.getRank(parseRank(target)));

        chessGame.moveOrNot(sourcePosition, targetPosition);
        chessGameService.update(chessGame, sourcePosition, targetPosition);
    }

    private int parseRank(final String[] source) {
        try {
            return Integer.parseInt(source[RANK_INDEX]);
        } catch (NumberFormatException e) {
            throw new IllegalArgumentException("ì˜¬ë°”ë¥¸ ìœ„ì¹˜ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.");
        }
    }

    private String[] splitPosition(final String[] splitCommand, final int index) {
        return splitCommand[index].split("");
    }

    public void run() throws SQLException {
        ChessGame chessGame = initChessGame(inputInitCommand());

        while (chessGame.isRunnable()) {
            printChessBoard(chessGame);
            executeCommand(chessGame);
        }
        processIfClear(chessGame);
    }

    private InitCommand inputInitCommand() {
        try {
            final String command = InputView.readInitCommand();
            return InitCommand.findByString(command);
        } catch (IllegalArgumentException e) {
            OutputView.printErrorMessage(e);
            return inputInitCommand();
        }
    }

    private ChessGame initChessGame(InitCommand command) throws SQLException {
        ChessGame chessGame = findChessGameIfContinue(command);

        if (chessGame == null) {
            OutputView.printNewGameMessage();
            chessGameService.delete();
            chessGame = chessGameService.save();
        }
        return chessGame;
    }

    private ChessGame findChessGameIfContinue(final InitCommand command) throws SQLException {
        ChessGame chessGame = null;
        if (command.isContinue()) {
            chessGame = chessGameService.findChessGame();
            printContinueMessage(chessGame);
        }
        return chessGame;
    }

    private void printContinueMessage(final ChessGame chessGame) {
        if (chessGame == null) {
            OutputView.printNonContinueMessage();
            return;
        }
        OutputView.printContinueMessage();
    }

    private void printChessBoard(final ChessGame chessGame) {
        if (chessGame.isStart()) {
            OutputView.printBoard(chessGame.getBoard());
        }
    }

    private void executeCommand(ChessGame chessGame) {
        try {
            final String[] splitCommand = InputView.readCommand().split(" ");
            final Command command = Command.findByString(splitCommand[COMMAND_INDEX]);
            commands.get(command).accept(chessGame, splitCommand);
        } catch (IllegalArgumentException e) {
            OutputView.printErrorMessage(e);
            executeCommand(chessGame);
        }
    }

    private void processIfClear(final ChessGame chessGame) {
        if (chessGame.isClear()) {
            final Side winner = chessGame.calculateWinner();

            chessGameService.delete();
            OutputView.printKingDie(winner);
            OutputView.printScore(chessGame.calculateScore(Side.WHITE), chessGame.calculateScore(Side.BLACK));
            OutputView.printWinner(winner);
        }
    }
}
```

## Null ê°ì²´ íŒ¨í„´
ì´ë²ˆì— ì²´ìŠ¤ë³´ë“œë¥¼ ë³´ë©´ Map<Position, Piece>ë¡œ ê°ì²´ë¥¼ ê´€ë¦¬í•˜ì˜€ë‹¤. ê·¸ëŸ°ë° ìƒê°í•´ ë³´ë©´ ì²´ìŠ¤ë³´ë“œì— ê¸°ë¬¼ì´ ì—†ëŠ” ë¹ˆì¹¸ë„ ìˆì„ ê²ƒì¸ë° ì´ë¥¼ ì–´ë–»ê²Œ ì²˜ë¦¬í•´ì•¼ ë ê¹Œ ê³ ë¯¼í•˜ë‹¤ ë¹ˆ ê¸°ë¬¼ ê°ì²´ë¥¼ ë„£ê¸°ë¡œ í•˜ì˜€ë‹¤. Null ê°ì²´ íŒ¨í„´ì´ ìˆëŠ” ê±¸ ëª°ëì—ˆëŠ”ë° ì½”ë“œë¥¼ êµ¬í˜„í•˜ë‹¤ ë³´ë‹ˆê¹ Null ê°ì²´ íŒ¨í„´ê³¼ ë¹„ìŠ·í•˜ê²Œ ë˜ì–´ ë­”ê°€ ì‹ ê¸°í–ˆë‹¤.

```java
package chess.domain.piece;

import chess.domain.board.Board;
import chess.domain.position.Path;
import chess.domain.position.Position;

import java.util.List;

public class Empty extends Piece {

    public Empty(final Type type, final Side side) {
        super(type, side, List.of());
    }

    @Override
    protected void validate(final Type type, final Side side) {
        validateType(type);
        validateSide(side);
    }

    @Override
    public Path findMovablePositions(final Position source, final Board board) {
        throw new UnsupportedOperationException("ì§€ì›í•˜ì§€ ì•ŠëŠ” ë©”ì„œë“œì…ë‹ˆë‹¤.");
    }
}
```

Null ê°ì²´ íŒ¨í„´ì´ë€ ë­˜ê¹Œ? ìš°ì„ , null ê²€ì‚¬ ì½”ë“œë¥¼ ì‚¬ìš©í•  ë•Œ ë‹¨ì ì€ ê°œë°œìê°€ null ê²€ì‚¬ ì½”ë“œë¥¼ ëˆ„ë½í•˜ê¸° ì‰¬ì›Œ NullPointerException(NPE)ì„ ë°œìƒì‹œí‚¬ ê°€ëŠ¥ì„±ì„ ë†’ì¸ë‹¤. ê·¸ë˜ì„œ null ê°ì²´ íŒ¨í„´ì„ ì‚¬ìš©í•¨ìœ¼ë¡œ ì¨ nullì„ ëŒ€ì‹ í•  ê°ì²´ë¥¼ ë¦¬í„´í•˜ì—¬ null ê²€ì‚¬ ì½”ë“œë¥¼ ì—†ì•¨ ìˆ˜ ìˆë„ë¡ í•œë‹¤. ì´ë ‡ê²Œ ë˜ë©´ í–¥í›„ ì½”ë“œ ìˆ˜ì •ì„ ë³´ë‹¤ ì‰½ê²Œ í•  ìˆ˜ ìˆë‹¤ëŠ” ì¥ì ì´ ìˆë‹¤.

## Streamì´ ê¼­ í•„ìš”í•œ ê²ƒì¼ê¹Œ?

ì´ë²ˆì— ì ìˆ˜ë¥¼ ë”í•  ë•Œ forë¥¼ ì“¸ì§€ streamì„ ì¨ì„œ ê³„ì‚°ì„ í• ì§€ ê³ ë¯¼í–ˆë‹¤. í˜„ì¬ forë¬¸ ê°™ì€ ê²½ìš° ê·¸ëƒ¥ í•œë°”í€´ë§Œ ëŒë©´ ë˜ì§€ë§Œ streamìœ¼ë¡œ í•˜ê²Œë˜ë©´ ê¸°ë³¸ ì ìˆ˜ë¡œ ë”í•  ë•Œ í•œë°”í€´, ê·¸ë¦¬ê³  í°ì´ 2ê°œì´ìƒ ìˆëŠ” ê³³ë§ˆë‹¤ ì ìˆ˜ë¥¼ ë§ˆì´ë„ˆìŠ¤ í•´ì£¼ê¸° ìœ„í•´ ë˜ í•œë°”í€´ê°€ ëŒê²Œëœë‹¤. ì¦‰, streamì„ ì‚¬ìš©í•¨ìœ¼ë¡œì¨ ë¶ˆí•„ìš”í•˜ê²Œ í•œë°”í€´ë¥¼ ë” ë„ëŠ”ê±° ê°™ì•„ì„œ ì ìš©ì„ ê²°êµ­ ì•ˆí–ˆë‹¤.

ì½”ë“œë¡œ ë‘˜ ë‹¤ ë¹„êµë¥¼ í•´ë³´ì

```java
//forë¬¸
public double calculateScore(Side side) {
    double sum = 0;
    for (int file = LOWER_BOUNDARY; file <= UPPER_BOUNDARY; file++) {
        sum += addScoreByRank(file, side);
    }
    return sum;
}

private double addScoreByRank(final int file, Side side) {
    double sum = 0;
    int pawnCount = 0;
    for (int rank = LOWER_BOUNDARY; rank <= UPPER_BOUNDARY; rank++) {
        final Piece piece = getPiece(Position.of(File.getFile(file), Rank.getRank(rank)));
        sum += addScoreIfRightColor(piece, side);
        pawnCount += addPawnCount(piece, side);
    }
    sum = minusIfPawnOver(sum, pawnCount);
    return sum;
}

private double minusIfPawnOver(double sum, final int pawnCount) {
    if (pawnCount >= OVER_COUNT) {
        sum -= pawnCount * (Type.PAWN.getValue() / DIVIDE_VALUE);
    }
    return sum;
}

private int addPawnCount(final Piece piece, Side side) {
    if (side.equals(piece.getSide()) && piece.isPawn()) {
        return 1;
    }
    return 0;
}

private double addScoreIfRightColor(final Piece piece, Side side) {
    if (side.equals(piece.getSide())) {
        return piece.getScore();
    }
    return 0;
}
```

```java
//streamë¬¸
final double score = board.values().stream()
        .filter(piece -> piece.getSide() == side)
        .mapToDouble(Piece::getScore)
        .sum();

final Map<Integer, Long> countByFile = board.entrySet().stream()
        .filter(entry -> entry.getValue().getSide() == side)
        .filter(entry -> entry.getValue().isPawn())
        .collect(Collectors.groupingBy(entry -> entry.getKey().getFileIndex(), Collectors.counting()));

final double minusScore = countByFile.values().stream()
        .filter(count -> count >= OVER_COUNT)
        .mapToDouble(score -> score / DIVIDE_VALUE)
        .sum();

final double finalScore = score - minusScore;
```

streamë¬¸ì´ ë¶ˆí•„ìš”í•˜ê²Œ í•œë°”í€´ ë” ëŒê³ ëŠ” ìˆì§€ë§Œ í™•ì‹¤íˆ streamë¬¸ì´ ì¢€ ë” ê°„ê²°í•˜ê³  ê¹”ë”í•œê±° ê°™ê¸´í•˜ë‹¤. ì˜ˆì „ì— ì•Œê³ ë¦¬ì¦˜ í’€ë•Œ ë¹„ìš©ì„ ì¢€ ë” ì¤‘ì‹œí–ˆë˜ ê²½í–¥ì´ ì•„ì§ ë‚¨ì•„ìˆì–´ ì´ë²ˆì—ë„ forì„ íƒí•˜ê¸´ í–ˆë‹¤. í•˜ì§€ë§Œ, ìµœê·¼ì— í˜‘ë ¥ì„ ìœ„í•œ ì½”ë“œë¥¼ ì¢€ ë” ìƒê°í•˜ê³  ìˆì–´ì„œ ì•ìœ¼ë¡œëŠ” streamì„ íƒí• ê±° ê°™ì€ë° ì´ëŠ” ìƒí™©ì— ë§ê²Œ ì˜ ì‚¬ìš©í•˜ë©´ ì¢‹ì„ ê±° ê°™ë‹¤.
- [for vs stream?](https://stackoverflow.com/questions/44180101/in-java-what-are-the-advantages-of-streams-over-loops)

## ìƒì†ì˜ ë‹¨ì ì„ ì§ì ‘ ê²½í—˜

![](/assets/img/blog/woowacourse/che_3.jpeg)

[ì´ì „ ë‹¨ê³„ ë¯¸ì…˜]ì—ì„œ ìƒì†ë³´ë‹¨ ì¡°í•©ì„ ì‚¬ìš©í•˜ìê³  í•œ ì ì´ ìˆëŠ”ë° ê·¸ë• ì´ë¡ ì ìœ¼ë¡œ ê³µë¶€í•œ ê²ƒì´ë¼ ì§ì ‘ ì™€ë‹¿ì§€ ì•Šì•˜ì—ˆëŠ”ë° ì´ë²ˆì— ì²´ìŠ¤ ë¯¸ì…˜ì„ êµ¬í˜„í•˜ë©´ì„œ ê·¸ ë‹¨ì ì„ ì œëŒ€ë¡œ ëŠê»´ë³¸ ê²ƒ ê°™ë‹¤. ì´ë²ˆ ì²´ìŠ¤ ë¯¸ì…˜ì—ì„œëŠ” Piece ê¸°ë¬¼ì„ ìƒì†ë°›ëŠ” í´ë˜ìŠ¤ê°€ ë¬´ë ¤ 7ê°œë‚˜ ëœë‹¤. ê·¸ë˜ì„œ Pieceë¥¼ ìˆ˜ì •í•˜ê²Œ ë˜ë©´ ì•„ë˜ ëª¨ë“  í´ë˜ìŠ¤ë“¤ì„ ìˆ˜ì •í•´ì•¼ ëœë‹¤.

ì²˜ìŒ ì„¤ê³„ì—ì„œ ë„ˆë¬´ ë§ì€ ì‹œê°„ì„ ìŸê²Œ ë˜ë©´ ë‚˜ì¤‘ì— êµ¬í˜„í•  ì‹œê°„ì´ ë¶€ì¡±í•˜ê²Œ ë˜ì–´ ê¸°í•œ ë‚´ì— ì‹œê°„ì„ ì™„ë£Œí•˜ì§€ ëª»í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ì ë‹¹í•œ ì„¤ê³„ë¥¼ í•˜ê³  êµ¬í˜„í•˜ë©´ì„œ ë§ì¶°ê°€ìê³  í˜ì–´ë“¤ê³¼ í•­ìƒ ì–˜ê¸°í–ˆë‹¤. ê·¸ë˜ì„œ ì½”ë“œë¥¼ êµ¬í˜„í•˜ëŠ” ì¤‘ê°„ì¤‘ê°„ì— ì„¤ê³„ë¥¼ ìˆ˜ì •í•  ì¼ì´ ì¦ì•˜ê³ , ë˜í•œ ë” ì¢‹ì€ ì„¤ê³„ê°€ ë³´ì´ë©´ ê·¸ê±¸ë¡œ ìˆ˜ì •í•  ì¼ë„ ì¦ì•˜ë‹¤.

ê·¸ë ‡ê²Œ ìˆ˜ì •í•˜ëŠ” ê±´ ì¢‹ì€ë°, ì´ê²Œ Piece ë¶€ë¶„ì„ ìˆ˜ì •í•  ë•Œê°€ ë¬¸ì œì˜€ë‹¤. Piece ë¶€ë¶„ì„ ìˆ˜ì •í–ˆë”ë‹ˆ ì˜¤ëŠ” ë¬´ìˆ˜íˆ ë§ì€ ë¹¨ê°„ìƒ‰ë“¤ì˜ ìš”ì²­... Piece ë¶€ë¶„ë“¤ì˜ ìì‹ í´ë˜ìŠ¤ë“¤ì´ ë¬¸ì œì˜€ë‹¤. 7ê°œê°€ ê´€ë ¨í•´ì„œ ë¬¶ì—¬ìˆë‹¤ ë³´ë‹ˆê¹ ì „ë¶€ ê³ ì¹˜ëŠ”ë° ìƒë‹¹íˆ ë§ì€ ì‹œê°„ì´ ê±¸ë¦°ë‹¤.(+í…ŒìŠ¤íŠ¸ ì½”ë“œë„ ê³ ì³ì•¼ ë¨..)

ì´ ì§“ì„ Pieceì™€ ê´€ë ¨ëœ ìˆ˜ì •ì„ í•  ë•Œë§ˆë‹¤ í•´ì•¼ ë˜ë‹ˆê¹ ì´ì œ ë‚˜ì¤‘ì—ëŠ” Piece ë¶€ë¶„ì—ì„œ í˜ì–´ê°€ "ì–´?"ë§Œ í•´ë„ ptsdê°€ ì™”ë‹¤. "ì–´" ê¸ˆì§€.. ì´ë ‡ê²Œ ì§ì ‘ ìƒì†ì˜ ë‹¨ì ì„ ê²ªì–´ë³´ë‹ˆê¹ ì™œ "ìƒì†ì„ ìœ„í•œ ì„¤ê³„ì™€ ë¬¸ì„œê°€ ì—†ë‹¤ë©´ ìƒì†í•˜ì§€ ë§ˆë¼"ë¼ëŠ”ì§€ ì§ì ‘ í”¼ë¶€ë¡œ ì˜ ëŠë¼ê²Œ ë˜ì—ˆë‹¤. ì•ìœ¼ë¡œëŠ” íŠ¹ë³„í•œ ì´ìœ ê°€ ì—†ë‹¤ë©´ ìƒì†ë³´ë‹¤ëŠ” ì¡°í•©ì„ ì¢€ ë” ì ê·¹ ì‚¬ìš©í• ê±° ê°™ë‹¤.

[ì´ì „ ë‹¨ê³„ ë¯¸ì…˜]:https://parkmuhyeun.github.io/woowacourse/2023-03-18-Blackjack/#%EC%B9%B4%EB%93%9C-%EC%83%81%EC%86%8D

## ì˜¤ë¸Œì íŠ¸ ìŠ¤í„°ë””

ë ˆë²¨ 1 ë™ì•ˆ ì˜¤ë¸Œì íŠ¸ ìŠ¤í„°ë””ë¥¼ í–ˆì—ˆëŠ”ë° í˜„ì¬ 10ì¥ê¹Œì§€ ì½ê³  í† ë¡ í–ˆë‹¤.(ë°©í•™ ë•Œ ë§ˆë¬´ë¦¬í–ˆì—ˆì–´ì•¼ í–ˆëŠ”ë°ã… ã… ) ì±…ì„ ì½ëŠ” ìŠµê´€ê³¼ ë§ì£¼ë³€ì´ ì—†ëŠ” ë‚˜ì—ê²ŒëŠ” ë§¤ìš° ì¢‹ì€ ê¸°íšŒì˜€ë‹¤ê³  ìƒê°í•œë‹¤. ë ˆë²¨ 2 ë•Œ ë¹¨ë¦¬ ë‚¨ì€ 5ì¥ì„ ë§ˆë¬´ë¦¬í•˜ê³  ê´€ë ¨í•´ì„œ ê¸€ì„ ì •ë¦¬í•´ ë³´ë©´ ì¢‹ì„ ê²ƒ ê°™ê³  ë ˆë²¨ 2 ë•Œë„ ë‹¤ì‹œ ì±… í•œ ê¶Œ ì •í•´ì„œ ìŠ¤í„°ë””ë¥¼ ì§„í–‰í•´ ë³´ë ¤ í•œë‹¤. ğŸ’ª

+ì¡°ì˜í˜¸ ë‹˜ì˜ ì˜¤ë¸Œì íŠ¸ê°€ ì§€ê¸ˆê¹Œì§€ ì½ì€ ì±… ì¤‘ TOP3 ì•ˆì— ë“¤ ì •ë„ë¡œ ë„ˆë¬´ ë§›ìˆì—ˆê¸° ë•Œë¬¸ì— ê°•ì¶”.

---

+ë¦¬ë·°ì–´ë‹˜ê»˜ ë°›ì€ ì½”ë“œ ë¦¬ë·°ì— ëŒ€í•´ ê´€ì‹¬ì´ ìˆìœ¼ë©´ ë‹¤ìŒ PRë“¤ì„ ì°¸ê³ !
- ì´ë²ˆì—ëŠ” ì²´ìŠ¤ ë¯¸ì…˜í•  ë•Œ í˜ë“¤ì—ˆë˜ ê±° ê°™ì•„ì„œ ë¦¬ë·°ì–´ë‹˜ê»˜ ë§ì´ ëª» ì—¬ì­¤ë³¸ê²Œ ì•„ì‰½ë„¤ìš”..
- [1, 2ë‹¨ê³„ - ì²´ìŠ¤](https://github.com/woowacourse/java-chess/pull/518)
- [3, 4ë‹¨ê³„ - ì²´ìŠ¤](https://github.com/woowacourse/java-chess/pull/537)

---

*í‹€ë¦° ë¶€ë¶„ì´ ìˆìœ¼ë©´ ì–¸ì œë“ ì§€ ë§ì”€í•´ ì£¼ì‹œë©´ ê³µë¶€í•´ì„œ ìˆ˜ì •í•˜ê² ìŠµë‹ˆë‹¤.